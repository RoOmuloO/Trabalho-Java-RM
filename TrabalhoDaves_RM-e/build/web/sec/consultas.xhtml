<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../WEB-INF/Template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h2>Usuarios</h2>
        <h:form id="form">
            <h:panelGroup id="lista" rendered="#{consultasBean.status == 'View'}">
                <h:commandButton value="Nova Consulta" action="#{consultasBean.novaConsulta()}" class="btn-success"/>
                
                <h:dataTable value="#{consultasBean.consultas}" var="v"
                             border="1" style="width: 100%" class="table-bordered">   
                    <h:column>
                        <f:facet name="header">
                            Id
                        </f:facet>
                            ${v.idconsulta}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Medico
                        </f:facet>
                            ${v.usuarioMedico.nome}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Paciente
                        </f:facet>
                            ${v.usuarioPaciente.nome}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            local
                        </f:facet>
                            ${v.local}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Data
                        </f:facet>
                            ${v.data}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Hora
                        </f:facet>
                            ${v.hora}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Ações
                        </f:facet>
                        <h:commandLink value="Edit"/>
                        &nbsp;
                        <h:commandLink value="Apagar" />
                    </h:column>
                    
                </h:dataTable>
            </h:panelGroup>

            <h:panelGroup id="Cadastro"  rendered="#{consultasBean.status == 'Cad'}">
                
                <h:panelGrid columns="2">
 
                    Nome: <h:inputText value="#{consultasBean.consulta.local}" required="true" label="Nome" style="height: 30px; width: 219;"/>
                    
                    Login: <h:inputText value="#{consultasBean.consulta.data}" required="true" label="Login" style="height: 30px; width: 219;"/>
                    
                    Senha: <h:inputText value="#{consultasBean.consulta.hora}" required="true" label="Login" style="height: 30px; width: 219;"/>
                    
                    Medico: <h:selectOneListbox value="#{consultasBean.consulta.usuarioMedico.idusuario}">
                        <f:selectItems value="#{consultasBean.medicos}" var="m" itemLabel="#{m.nome}" itemValue="#{m.idusuario}" />                      
                    </h:selectOneListbox>
                    
                    Paciente: <h:selectOneListbox value="#{consultasBean.consulta.usuarioPaciente.idusuario}">
                        <f:selectItems value="#{consultasBean.pacientes}" var="m" itemLabel="#{m.nome}" itemValue="#{m.idusuario}" />                        
                    </h:selectOneListbox>
                    
                    <h:panelGroup />
                    <h:panelGroup style="float: right;">
                        <h:commandButton value="Gravar" action="#{consultasBean.gravarConsulta()}" class="btn-success"/>
                    </h:panelGroup>   
                </h:panelGrid>
            </h:panelGroup>
        </h:form>
        <h:form   rendered="#{consultasBean.status == 'Cad'}" id="formVoltar">
            <h:commandButton value="Voltar" class="btn-danger" immediate="true" action="#{consultasBean.voltar()}"/>
        </h:form>
    </ui:define>

</ui:composition>